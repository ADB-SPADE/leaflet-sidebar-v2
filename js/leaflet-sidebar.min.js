L.Control.Sidebar=L.Control.extend({includes:L.Mixin.Events,initialize:function(t,s){var i,e;for(L.setOptions(this,s),this._sidebar=L.DomUtil.get(t),L.Browser.touch&&L.DomUtil.addClass(this._sidebar,"leaflet-touch"),i=this._sidebar.children.length-1;i>=0;i--)e=this._sidebar.children[i],"UL"==e.tagName&&L.DomUtil.hasClass(e,"sidebar-tabs")?this._tabs=e:"DIV"==e.tagName&&L.DomUtil.hasClass(e,"sidebar-content")&&(this._container=e);for(this._tabitems=[],i=this._tabs.children.length-1;i>=0;i--)e=this._tabs.children[i],"LI"==e.tagName&&(this._tabitems.push(e),e._sidebar=this);for(this._panes=[],this._closeButtons=[],i=this._container.children.length-1;i>=0;i--)if(e=this._container.children[i],"DIV"==e.tagName&&L.DomUtil.hasClass(e,"sidebar-pane")){this._panes.push(e);for(var a=e.querySelectorAll(".sidebar-heading > .sidebar-close"),o=0,l=a.length;l>o;o++)this._closeButtons.push(a[o])}},addTo:function(t){var s,i;for(this._map=t,s=this._tabitems.length-1;s>=0;s--)i=this._tabitems[s],L.DomEvent.on(i.firstChild,"click",this._onClick,i);for(s=this._closeButtons.length-1;s>=0;s--)i=this._closeButtons[s],L.DomEvent.on(i,"click",this._onCloseClick,this);return this},removeFrom:function(){var t,s;for(this._map=null,t=this._tabitems.length-1;t>=0;t--)s=this._tabitems[t],L.DomEvent.off(s.firstChild,"click",this._onClick);for(t=this._closeButtons.length-1;t>=0;t--)s=this._closeButtons[t],L.DomEvent.off(s,"click",this._onCloseClick,this);return this},open:function(t){var s,i;for(s=this._panes.length-1;s>=0;s--)i=this._panes[s],i.id==t?L.DomUtil.addClass(i,"active"):L.DomUtil.hasClass(i,"active")&&L.DomUtil.removeClass(i,"active");for(s=this._tabitems.length-1;s>=0;s--)i=this._tabitems[s],i.firstChild.hash=="#"+t?L.DomUtil.addClass(i,"active"):L.DomUtil.hasClass(i,"active")&&L.DomUtil.removeClass(i,"active");return this.fire("content",{id:t}),L.DomUtil.hasClass(this._sidebar,"collapsed")&&(this.fire("opening"),L.DomUtil.removeClass(this._sidebar,"collapsed")),this},close:function(){for(var t=this._tabitems.length-1;t>=0;t--){var s=this._tabitems[t];L.DomUtil.hasClass(s,"active")&&L.DomUtil.removeClass(s,"active")}return L.DomUtil.hasClass(this._sidebar,"collapsed")||(this.fire("closing"),L.DomUtil.addClass(this._sidebar,"collapsed")),this},_onClick:function(){L.DomUtil.hasClass(this,"active")?this._sidebar.close():this._sidebar.open(this.firstChild.hash.slice(1))},_onCloseClick:function(){this.close()}}),L.control.sidebar=function(t,s){return new L.Control.Sidebar(t,s)};